{% extends 'mydidata/base.html' %}

{% block content %}
    {% load question_extras %}
    {% load answer_extras %}
    {% load classroom_extras %}
    {% load tz %}
    <div id="content-container" class="container p-none">
            {%for topic in topics%}

                <h2><a href="{{topic.get_absolute_url}}">{{topic.topic_title}}</a></h2>
                {%get_clasroom_list students as klasses%}
                {% for klass in klasses%}
                    {%get_deadline topic klass as deadline%}
                    {% if deadline%}
                        {% localtime on %}
                            <h4>Data Limite para Envio das Tarefas: {{deadline}}</h4>
                        {%endlocaltime%}
                    {%endif%}
                {%endfor%}
                
                <table id="cd-table" class="table table-hover">
                    <tbody>
                        <tr>
                            {% for question in topic.question_set.all %}
                                <th>Quest√£o {{ forloop.counter }}</th>
                            {% endfor %}
                        </tr>
                        {% for student in students%}
                            <tr>
                                
                                {%for question in topic.get_ordered_questions %}
                                    {% get_answers question student as answers%}
                                    {%if answers%}
                                        {%for answer in answers%}
                                            {% get_icon_class answer student as url_and_icon_class%}
                                            <td>
                                                <a href="{{url_and_icon_class.0}}"><i style="{{url_and_icon_class.1}}" class="{{url_and_icon_class.2}}"></i></a>
                                            </td>
                                        {%endfor%}
                                    {%else%}
                                        <td><a 
                                            href="{{ question.get_answer_url }}"><i class="bi bi-pencil-square"></i></a><br></td>
                                    {%endif%}
                                {%endfor%}
                            </tr>
                        {%endfor%}
                    </tbody>
                </table>
            {%endfor%}
    </div>
{% endblock %}
