{% extends 'mydidata/base.html' %}
{%block page_description%}
    <meta name="description" content="{{topic.description}}">
{%endblock page_description%}
{%block title%}
    {{topic.topic_title}}
{%endblock title%}
{% block content %}
    <div id="content-container" class="container p-none">
        <hr class="my-3" />
        <div >
            
            {%if test_user_relation and test_user_relation.is_closed%}
                <div class="alert alert-primary" role="alert">
                    A avaliação desta etapa já foi concluída!
                    <a class="alert-link" href="{%url 'mydidata:test_progress' test_user_relation.test.uuid classroom.id %}"> Clique aqui para verificar suas respostas. </a>
                </div>
            {%endif%}
            <div aria-label="Page navigation example" >
                <ul class="pagination" style="justify-content: space-between;">
                  <li class="page-item"><a class="page-link" href="{{topic.previous_url}}">Etapa Anterior</a></li>
                  <li class="page-item"><a class="page-link" href="{{topic.next_url}}">Próxima Etapa</a></li>
                </ul>
      
            </div>    
            
                <div id="gi-container" class="ad-container2">
                    
                    <a href="/mydidata/version/{{topic.id}}/"> Editar </a>
                    | <a href="/mydidata/version_list/{{topic.id}}/"> Versões </a>
                    
                    {% include 'mydidata/topic_item_view.html' %}
                    
                </div>
            

        </div>
        {% if user.is_authenticated and question %}
            <hr class="my-3" />
            <div>
                <h4 class="ad-mh m-none"> Para certificação, selecione e envie o arquivo elaborado neste tutorial </h4>
                <a class="btn btn-lg btn-primary" href="{%url 'mydidata:discursive_answer' question.uuid%}"> Clique para enviar o arquivo desenvolvido neste tópico</a>
            </div>
        {%endif%}
        <hr class="my-3" />
        <div aria-label="Page navigation example" >
            <ul class="pagination" style="justify-content: space-between;">
              <li class="page-item"><a class="page-link" href="{{topic.previous_url}}">Etapa Anterior</a></li>
              <li class="page-item"><a class="page-link" href="{{topic.next_url}}">Próxima Etapa</a></li>
            </ul>
  
        </div>    
        
        {# List Questions #}
        {%if topic.show_questions%}

            <div id="cd-container" >
                <div class="ad-headers">
                    <h4 class="ad-mh m-none">Questões</h4>
                </div>
                <a href="/mydidata/question_types/{{topic.uuid}}">+ Questão</a>
                <div id="cd-body" class="row">
                    <table id="cd-table" class="table">
                        <tbody>
                            <tr></tr>
                            
                            {% for question in questions %}
                                {% include 'mydidata/question_item_view.html' %}
                            {% endfor %}
                            {%if topic.test_enabled%}
                                <tr><a href="{{topic.test_enabled.get_absolute_url}}">Fazer Avaliação</a></tr>
                            {%endif%}
                        </tbody>
                    </table>
                </div>
            </div>
        {%endif%}
        <div id="cd-container" >
            <div class="ad-headers">
                <h4 class="ad-mh m-none">Comentários...</h4>
                <div class="mt-4 flex md:mt-0 md:ml-4">
                    <button type="button" hx-get="{% url 'mydidata:comment_create_form' topic.id %}" hx-target="#commentforms" hx-swap="beforeend" class="btn btn-primary">
                        Comentar
                    </button>
                </div>
                <div id="comments_area"> 
                    {% include 'mydidata/partials/comment_list.html' %}
                </div>
            </div>
        </div>

        {%if test_user_relation and not test_user_relation.is_closed%}
            <a class="btn btn-lg btn-primary" href="{%url 'mydidata:start_test' test_user_relation.test.uuid%}"> Fazer Avaliação </a>
        {%endif%}


        {# List Communications #}
    </div>
{% endblock %}
<!-- Modal -->
