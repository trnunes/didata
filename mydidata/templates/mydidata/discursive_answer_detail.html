{% extends 'mydidata/base.html' %}

{% block content %}
    <div id="content-container" class="container p-none">
        <div >
            <div id="gi-container" class="ad-container2">
                <div aria-label="Page navigation example" >
                    <ul class="pagination" style="justify-content: space-between;">
                      <li class="page-item"><a class="page-link" href="{{answer.question.topic.get_absolute_url}}">Voltar para o Tópico</a></li>
                      
                    </ul>
          
                </div>
                <!-- TODO acertar progresso -->
                <h3>Progresso</h3>
                <div class="col-md-9">
                    {% for question, answer_sent in answers_by_question.items %}
                        {% if question == answer.question%}
                            <a class="btn btn-success btn-lg" role="button" href="{{answer_set.get_detail_url}}">Questão {{forloop.counter}}</a>
                        {% elif answer_sent %}
                            <a class="btn btn-success btn-sm"href="{{answer_set.get_detail_url}}">Questão {{forloop.counter}}</a>
                        {% else %}
                            <a class="btn btn-secondary btn-sm"href="{{question.get_answer_url}}">Questão {{forloop.counter}}</a>
                        {% endif %}
                        
                    {% endfor%}
                </div>    
                <div class="row gi-body">
                    <div class="col-md-9">
                        <h3 class="gi-sh">Questão</h3>
                        <p>{{ answer.question.question_text | safe}}</p>
                    </div>
                    
                    <div class="col-md-9">
                        <h3 class="gi-sh">Resposta</h3> 
                        (<a href="{{ answer.question.get_answer_url }}" class="p-r-none">Editar <i class="bi bi-pencil-square"></i></a>)
                        {% if user.is_superuser %}
                
                            <a  href="{% url 'mydidata:feedback' answer.id %}"
                                                  class="btn btn-primary p-r-none">Avaliar</a>
                        {% endif%}
                        <p>{{ answer.answer_text | safe}}
                            
                        </p>
                        <p>{{ answer.file_link | safe }}</p>

                        
                    </div>
                    <div>
                        {%if answer.is_graphic_answer%}
                            {%if answer.graphic_annotations%}
                                <h3> Correções na Imagem</h3>
                            {%endif%}
                            {%include 'mydidata/graphic_feedback.html'%}
                        {% endif %}
                    </div>
                    <div class="col-md-9">
                        <span><strong> Enviada por: </strong></span>
                        {% if answer.question.is_team_work %}
                            <span><a href="{{answer.team.get_absolute_url}}">Equipe {{answer.team.name}}</span>
                        {% else %}
                            <span>&nbsp{{answer.student.first_name}}&nbsp{{answer.student.last_name}} ({{answer.student.username}})</span>
                        {% endif %}
                    </div>
                    {% if answer.feedback %}
                        <div class="col-md-9">
                            <h3 class="gi-sh">Correções</h3>
                            <p><font color='red'>{{ answer.feedback | safe}}</font></p>
                        </div>
                    {%endif%}
                    
                    {% if answer.get_evaluation_message %}
                        <div class="col-md-9">
                            <h3 class="gi-sh">Avaliação</h3>
                            <p><font color='red'>{{ answer.get_evaluation_message}}</font></p>
                        </div>
                    {% endif %}
                    <div class="col-md-9">

                    {% if answer.question.next_question %}

                                
                        <a class="btn btn-primary btn-lg" role="button" href="{{answer.question.next_question.get_answer_url}}">Próxima Questão</a>
                        

                    {% endif %}
                    </div>                    
                    
                    </div>

                </div>
            </div>
        </div>
    </div>
{% endblock %}
